"use strict";let series=[],seriesFavs=[],seriesList=document.querySelector(".js-series-list");const seriesFavourites=document.querySelector(".js-favs"),input=document.querySelector(".js-input"),btn=document.querySelector(".js-btn"),resetBtn=document.querySelector(".js-btn-delete");function handleGetInfoSeries(){getApi()}function isFav(e){return void 0!==seriesFavs.find(s=>s.show.id===e.show.id)}function paintSeries(){let e="",s="";for(const t of series){s=isFav(t)?"color-fav":"";const i=t.show.name;let n=t.show.image,o="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";n=null===n?o:t.show.image.medium,e+=`<li class="list--li js-serieBox ${s}" id="${t.show.id}">`,e+=`<img src="${n}" width="300" height="300" class="serie-img"/>`,e+=`<h3 class="serie-title">${i}</h3>`,e+="</li>"}seriesList.innerHTML=e,listenSerie()}function preventBtn(e){e.preventDefault()}function handleClickEv(e){console.log(e.currentTarget),console.log(e.currentTarget.id);const s=parseInt(e.currentTarget.id),t=series.find(e=>e.show.id===s),i=seriesFavs.findIndex(e=>e.show.id===s);-1===i?seriesFavs.push(t):seriesFavs.splice(i,1),paintFavs(),paintSeries(),setLocalStorage()}function listenSerie(){const e=document.querySelectorAll(".js-serieBox");for(const s of e)s.addEventListener("click",handleClickEv)}function paintFavs(){let e='<li class="title-fav">Series favoritas: </li>';for(const s of seriesFavs){let t=s.show.name,i=s.show.id,n=s.show.image,o="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";n=null===n?o:s.show.image.medium,e+=`<li class="li--fav js-serieBox" id="${i}">`,e+=`<img src="${n}" width="200" height="200" class="img-fav" />`,e+=`<h3 class="serie-title">${t}</h3>`,e+='<button class="js-delete-btn delete-btn">X</button>',e+="</li>"}seriesFavourites.innerHTML=e}function setLocalStorage(){const e=JSON.stringify(seriesFavs);localStorage.setItem("seriesFavs",e)}function getApi(){const e=input.value;fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{series=e,paintSeries(),setLocalStorage()})}function getLocalStorage(){const e=localStorage.getItem("seriesFavs");if(null===e)getApi();else{const s=JSON.parse(e);seriesFavs=s,paintFavs()}}function handleClickResetBtn(){location.reload()}btn.addEventListener("click",handleGetInfoSeries),btn.addEventListener("click",preventBtn),getLocalStorage(),resetBtn.addEventListener("click",handleClickResetBtn),console.log(">> Ready :)");